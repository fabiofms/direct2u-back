(this.webpackJsonpfront=this.webpackJsonpfront||[]).push([[0],{24:function(e,t,n){e.exports=n(36)},35:function(e,t,n){},36:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(22),o=n.n(c),s=n(2),u=n(7),l=n(5),i=n(1),m=n.n(i),p=n(6),f=n(4),d=n(9),h=n(3),b=function(e){var t=Object(a.useState)({name:"",price:""}),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),i=(l[0],l[1]),b=Object(a.useState)([]),E=Object(s.a)(b,2),g=E[0],v=E[1],y=c.name,j=c.price,k=function(e){return o(Object(h.a)(Object(h.a)({},c),{},Object(d.a)({},e.target.name,e.target.value)))},O=function(){var t=Object(f.a)(m.a.mark((function t(n){var a,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),v((function(e){return[]})),a={name:y,price:j},t.prev=3,i(!0),t.next=7,fetch("https://direct-to-you.herokuapp.com/api/product",{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(a)});case 7:return r=t.sent,t.next=10,r.json();case 10:c=t.sent,r.ok?(i(!1),e.history.push("/products")):(o=[],c.errors.forEach((function(e){o.push(e.msg)})),v((function(e){return e.concat(o)})),i(!1)),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(3),console.error(t.t0),i(!1),v((function(e){return[].concat(Object(p.a)(e),[t.t0.message||"Something went wrong, please try again"])}));case 19:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),x=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Add New Product"),r.a.createElement(x,{errors:g}),r.a.createElement("form",{className:"form",onSubmit:function(e){return O(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Product Name",name:"name",value:y,onChange:function(e){return k(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Product price",name:"price",value:j,onChange:function(e){return k(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Add"})))},E=function(e){var t=function(){var t=Object(f.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://direct-to-you.herokuapp.com/api/product/"+e.id,{method:"DELETE",headers:{"x-auth-token":localStorage.getItem("token")}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,n.ok){t.next=9;break}throw new Error(a.msg);case 9:e.onDelete(e.id),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("li",null,r.a.createElement("div",{className:"post bg-white p my-1"},r.a.createElement("p",null,"Name: ",e.name,r.a.createElement("br",null),"Price: R$",e.price.toFixed(2)),r.a.createElement("p",null,r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:function(){e.history.push("/product/"+e.id)}},"Edit"),r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:t},"Delete"))))},g=function(e){return 0===e.items.length?r.a.createElement("div",{className:"center"},r.a.createElement("h2",null,"No products found.")):r.a.createElement("ul",{style:{position:"relative"},className:"products-list"},e.items.map((function(t){return r.a.createElement(E,{key:t._id,id:t._id,name:t.name,price:t.price,onDelete:e.onDelete,history:e.history})})))},v=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(),l=Object(s.a)(u,2),i=(l[0],l[1]),p=Object(a.useState)(!1),d=Object(s.a)(p,2),h=(d[0],d[1]);return Object(a.useEffect)((function(){(function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,fetch("https://direct-to-you.herokuapp.com/api/product",{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,t.ok){e.next=10;break}throw new Error(n.msg);case 10:o((function(){return n})),h(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),h(!1),i(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Products"),r.a.createElement("button",{onClick:function(){e.history.push("/product/new")},className:"btn btn-green"},"New Product"),c&&r.a.createElement(g,{items:c,onDelete:function(e){o((function(t){return t.filter((function(t){return t._id!==e}))})),console.log(c)},history:e.history}))},y=function(e){var t=Object(l.g)().productId,n=Object(a.useState)({name:"",price:""}),c=Object(s.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(!1),b=Object(s.a)(i,2),E=(b[0],b[1]),g=Object(a.useState)([]),v=Object(s.a)(g,2),y=v[0],j=v[1],k=o.name,O=o.price;Object(a.useEffect)((function(){(function(){var e=Object(f.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://direct-to-you.herokuapp.com","/api/product/").concat(t),{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,u({name:a.name,price:Number(a.price).toLocaleString("pt-BR")}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[t,u]);var x=function(e){return u(Object(h.a)(Object(h.a)({},o),{},Object(d.a)({},e.target.name,e.target.value)))},N=function(){var n=Object(f.a)(m.a.mark((function n(a){var r,c,o,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),j((function(e){return[]})),r={name:k,price:O},n.prev=3,E(!0),n.next=7,fetch("https://direct-to-you.herokuapp.com/api/product/"+t,{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(r)});case 7:return c=n.sent,n.next=10,c.json();case 10:o=n.sent,console.log(o),c.ok?(E(!1),e.history.push("/products")):(s=[],o.errors.forEach((function(e){s.push(e.msg)})),j((function(e){return e.concat(s)})),E(!1)),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(3),console.error(n.t0),E(!1),j((function(e){return[].concat(Object(p.a)(e),[n.t0.message||"Something went wrong, please try again"])}));case 20:case"end":return n.stop()}}),n,null,[[3,15]])})));return function(e){return n.apply(this,arguments)}}(),w=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Update Product"),r.a.createElement(w,{errors:y}),r.a.createElement("form",{className:"form",onSubmit:function(e){return N(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Product Name",name:"name",value:k,onChange:function(e){return x(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Product Price",name:"price",value:O,onChange:function(e){return x(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Update"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){return e.history.push("/products")}},"Cancel")))},j=function(e){return r.a.createElement("li",null,r.a.createElement("div",{className:"post bg-white p my-1"},r.a.createElement("p",null,"Product: ",e.name),r.a.createElement("p",null,"Quantity: ",e.quantity),r.a.createElement("p",null,r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:function(){return e.onDelete(e.id)}},"Delete"))))},k=function(e){return r.a.createElement("ul",{style:{position:"relative"},className:"products-list"},e.items.map((function(t){return r.a.createElement(j,{key:t.product,id:t.product,name:t.name,quantity:t.quantity,onDelete:e.onDelete,history:e.history})})))},O=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)([]),l=Object(s.a)(u,2),i=l[0],b=l[1],E=Object(a.useState)(),g=Object(s.a)(E,2),v=g[0],y=g[1],j=Object(a.useState)([]),O=Object(s.a)(j,2),x=O[0],N=O[1],w=Object(a.useState)([]),S=Object(s.a)(w,2),C=S[0],I=S[1],D=Object(a.useState)(!1),T=Object(s.a)(D,2),P=(T[0],T[1]),_=Object(a.useState)({quantity:"",product:""}),L=Object(s.a)(_,2),A=L[0],U=L[1],q=A.quantity,J=A.product;Object(a.useEffect)((function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,fetch("https://direct-to-you.herokuapp.com/api/product",{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,t.ok){e.next=10;break}throw new Error(n.msg);case 10:o((function(){return n})),n.length>0&&U((function(e){return Object(h.a)(Object(h.a)({},e),{},{product:n[0]._id})})),P(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),P(!1),I(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return P(!0),e.prev=1,e.next=4,fetch("https://direct-to-you.herokuapp.com/api/client",{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,t.ok){e.next=10;break}throw new Error(n.msg);case 10:y((function(){return n})),n.length>0&&N(n[0]._id),P(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),P(!1),I(e.t0.message);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();e(),t()}),[]);var G=function(e){U(Object(h.a)(Object(h.a)({},A),{},Object(d.a)({},e.target.name,e.target.value)))},R=function(){var t=Object(f.a)(m.a.mark((function t(n){var a,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),I((function(e){return[]})),a={client:x,products:i},t.prev=3,P(!0),t.next=7,fetch("https://direct-to-you.herokuapp.com/api/sale",{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(a)});case 7:return r=t.sent,t.next=10,r.json();case 10:c=t.sent,r.ok?(P(!1),e.history.push("/sales")):(o=[],c.errors.forEach((function(e){o.push(e.msg)})),I((function(e){return e.concat(o)})),P(!1)),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(3),console.error(t.t0),P(!1),I((function(e){return[].concat(Object(p.a)(e),[t.t0.message||"Something went wrong, please try again"])}));case 19:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),Q=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Add New Sale"),r.a.createElement(Q,{errors:C}),r.a.createElement("form",{className:"form",onSubmit:function(e){return R(e)}},r.a.createElement("input",{type:"submit",className:"btn btn-green",value:"Add Sale"}),r.a.createElement("p",{className:"lead text-dark"},"Choose a Client:"),v&&r.a.createElement("select",{name:"client",value:x,onChange:function(e){return function(e){return N(e.target.value)}(e)}},v.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))),r.a.createElement("form",{className:"form",onSubmit:function(e){!function(e){e.preventDefault();var t=c.filter((function(e){return e._id===J}))[0].name,n=Object(h.a)(Object(h.a)({},A),{},{name:t});b((function(e){return[].concat(Object(p.a)(e),[n])})),U((function(e){return Object(h.a)(Object(h.a)({},e),{},{quantity:0})}))}(e)}},r.a.createElement("p",{className:"lead text-dark"},"Choose a Product:"),c&&r.a.createElement("select",{name:"product",value:J,onChange:function(e){return G(e)}},c.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Quantity",name:"quantity",value:q,onChange:function(e){return G(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Add Product"})),c&&r.a.createElement(k,{items:i,onDelete:function(e){b((function(t){return t.filter((function(t){return e!==t.product}))}))},history:e.history}))},x=function(e){var t=function(){var t=Object(f.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://direct-to-you.herokuapp.com/api/sale/"+e.id,{method:"DELETE",headers:{"x-auth-token":localStorage.getItem("token")}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,n.ok){t.next=9;break}throw new Error(a.msg);case 9:e.onDelete(e.id),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}(),n=function(){var t=Object(f.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://direct-to-you.herokuapp.com/api/sale/email/"+e.id,{method:"GET",headers:{"x-auth-token":localStorage.getItem("token")}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,n.ok){t.next=12;break}throw alert("Email not sent"),new Error(a.msg);case 12:alert("Email sent!");case 13:t.next=17;break;case 15:t.prev=15,t.t0=t.catch(0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("li",null,r.a.createElement("div",{className:"post bg-white p my-1"},r.a.createElement("p",null,"Date: ",e.date," ",r.a.createElement("br",null),"Client: ",e.client.name," ",r.a.createElement("br",null),"Items: ",e.quantity," ",r.a.createElement("br",null),"Price: R$",e.price.toFixed(2)),r.a.createElement("p",null,r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:function(){e.history.push("/sale/"+e.id)}},"Edit"),r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:t},"Delete"),r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:n},"Send Email"))))},N=function(e){return 0===e.items.length?r.a.createElement("div",{className:"center"},r.a.createElement("h2",null,"No sales found.")):r.a.createElement("ul",{style:{position:"relative"},className:"sales-list"},e.items.map((function(t){return r.a.createElement(x,{key:t._id,id:t._id,client:t.client,date:t.date,price:t.price,done:t.done,quantity:t.products.length,onDelete:e.onDelete,history:e.history})})))},w=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(),l=Object(s.a)(u,2),i=(l[0],l[1]),p=Object(a.useState)(!1),d=Object(s.a)(p,2),h=(d[0],d[1]);return Object(a.useEffect)((function(){(function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,fetch("https://direct-to-you.herokuapp.com/api/sale",{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,t.ok){e.next=10;break}throw new Error(n.msg);case 10:o((function(){return n})),h(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),h(!1),i(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Sales"),r.a.createElement("button",{onClick:function(){e.history.push("/sale/new")},className:"btn btn-green"},"New Sale"),c&&r.a.createElement(N,{items:c,onDelete:function(e){o((function(t){return t.filter((function(t){return t._id!==e}))})),console.log(c)},history:e.history}))},S=function(e){var t=Object(l.g)().saleId,n=Object(a.useState)(),c=Object(s.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)([]),b=Object(s.a)(i,2),E=b[0],g=b[1],v=Object(a.useState)(),y=Object(s.a)(v,2),j=y[0],O=y[1],x=Object(a.useState)(),N=Object(s.a)(x,2),w=N[0],S=N[1],C=Object(a.useState)([]),I=Object(s.a)(C,2),D=I[0],T=I[1],P=Object(a.useState)(!1),_=Object(s.a)(P,2),L=(_[0],_[1]),A=Object(a.useState)({quantity:"",product:""}),U=Object(s.a)(A,2),q=U[0],J=U[1],G=q.quantity,R=q.product;Object(a.useEffect)((function(){var e=function(){var e=Object(f.a)(m.a.mark((function e(){var n,a,r,c,o;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,e.next=4,fetch("https://direct-to-you.herokuapp.com/api/product",{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 4:return n=e.sent,e.next=7,n.json();case 7:if(a=e.sent,n.ok){e.next=10;break}throw new Error(a.msg);case 10:return u((function(){return a})),a.length>0&&J((function(e){return Object(h.a)(Object(h.a)({},e),{},{product:a[0]._id})})),L(!1),e.next=15,fetch("".concat("https://direct-to-you.herokuapp.com","/api/sale/").concat(t),{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 15:return r=e.sent,e.next=18,r.json();case 18:c=e.sent,o=[],c.products.forEach((function(e){var t=a.filter((function(t){return t._id===e.product}))[0].name;o.push(Object(h.a)(Object(h.a)({},e),{},{name:t}))})),g((function(e){return[].concat(Object(p.a)(e),o)})),console.log(a),S(c.client),e.next=30;break;case 26:e.prev=26,e.t0=e.catch(1),L(!1),T((function(t){return t.concat(e.t0.message)}));case 30:case"end":return e.stop()}}),e,null,[[1,26]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return L(!0),e.prev=1,e.next=4,fetch("https://direct-to-you.herokuapp.com/api/client",{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,t.ok){e.next=10;break}throw new Error(n.msg);case 10:O((function(){return n})),n.length>0&&S(n[0]._id),L(!1),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),L(!1),T((function(t){return t.concat(e.t0.message)}));case 19:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}();e(),n()}),[]);var Q=function(e){J(Object(h.a)(Object(h.a)({},q),{},Object(d.a)({},e.target.name,e.target.value)))},B=function(){var n=Object(f.a)(m.a.mark((function n(a){var r,c,o,s;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),T((function(e){return[]})),r={client:w,products:E},n.prev=3,L(!0),n.next=7,fetch("https://direct-to-you.herokuapp.com/api/sale/"+t,{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(r)});case 7:return c=n.sent,n.next=10,c.json();case 10:o=n.sent,c.ok?(L(!1),e.history.push("/sales")):(s=[],o.errors.forEach((function(e){s.push(e.msg)})),T((function(e){return e.concat(s)})),L(!1)),n.next=19;break;case 14:n.prev=14,n.t0=n.catch(3),console.error(n.t0),L(!1),T((function(e){return[].concat(Object(p.a)(e),[n.t0.message||"Something went wrong, please try again"])}));case 19:case"end":return n.stop()}}),n,null,[[3,14]])})));return function(e){return n.apply(this,arguments)}}(),F=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Update Sale"),r.a.createElement(F,{errors:D}),r.a.createElement("form",{className:"form",onSubmit:function(e){return B(e)}},r.a.createElement("input",{type:"submit",className:"btn btn-green",value:"Update Sale"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){return e.history.push("/sales")}},"Cancel"),r.a.createElement("p",{className:"lead text-dark"},"Choose a Client:"),j&&w&&r.a.createElement("select",{name:"client",value:w,onChange:function(e){return function(e){return S(e.target.value)}(e)}},j.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)})))),r.a.createElement("form",{className:"form",onSubmit:function(e){!function(e){e.preventDefault();var t=o.filter((function(e){return e._id===R}))[0].name,n=Object(h.a)(Object(h.a)({},q),{},{name:t});g((function(e){return[].concat(Object(p.a)(e),[n])})),J((function(e){return Object(h.a)(Object(h.a)({},e),{},{quantity:0})}))}(e)}},r.a.createElement("p",{className:"lead text-dark"},"Choose a Product:"),o&&r.a.createElement("select",{name:"product",value:R,onChange:function(e){return Q(e)}},o.map((function(e){return r.a.createElement("option",{key:e._id,value:e._id},e.name)}))),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Quantity",name:"quantity",value:G,onChange:function(e){return Q(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Add Product"})),o&&E&&r.a.createElement(k,{items:E,onDelete:function(e){g((function(t){return t.filter((function(t){return e!==t.product}))}))},history:e.history}))},C=function(e){var t=Object(a.useState)({name:"",email:"",tel:"",address:""}),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(!1),l=Object(s.a)(u,2),i=(l[0],l[1]),b=Object(a.useState)([]),E=Object(s.a)(b,2),g=E[0],v=E[1],y=c.name,j=c.email,k=c.tel,O=c.address,x=function(e){return o(Object(h.a)(Object(h.a)({},c),{},Object(d.a)({},e.target.name,e.target.value)))},N=function(){var t=Object(f.a)(m.a.mark((function t(n){var a,r,o,s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),v((function(e){return[]})),a=Object(h.a)({},c),t.prev=3,i(!0),t.next=7,fetch("https://direct-to-you.herokuapp.com/api/client",{method:"POST",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(a)});case 7:return r=t.sent,t.next=10,r.json();case 10:o=t.sent,r.ok?(i(!1),e.history.push("/clients")):(s=[],o.errors.forEach((function(e){s.push(e.msg)})),v((function(e){return e.concat(s)})),i(!1)),t.next=19;break;case 14:t.prev=14,t.t0=t.catch(3),console.error(t.t0),i(!1),v((function(e){return[].concat(Object(p.a)(e),[t.t0.message||"Something went wrong, please try again"])}));case 19:case"end":return t.stop()}}),t,null,[[3,14]])})));return function(e){return t.apply(this,arguments)}}(),w=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Add New Client"),r.a.createElement(w,{errors:g}),r.a.createElement("form",{className:"form",onSubmit:function(e){return N(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client Name",name:"name",value:y,onChange:function(e){return x(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client email",name:"email",value:j,onChange:function(e){return x(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client tel",name:"tel",value:k,onChange:function(e){return x(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client address",name:"address",value:O,onChange:function(e){return x(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Add"})))},I=function(e){var t=function(){var t=Object(f.a)(m.a.mark((function t(){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://direct-to-you.herokuapp.com/api/client/"+e.id,{method:"DELETE",headers:{"x-auth-token":localStorage.getItem("token")}});case 3:return n=t.sent,t.next=6,n.json();case 6:if(a=t.sent,n.ok){t.next=9;break}throw new Error(a.msg);case 9:e.onDelete(e.id),t.next=14;break;case 12:t.prev=12,t.t0=t.catch(0);case 14:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(){return t.apply(this,arguments)}}();return r.a.createElement("li",null,r.a.createElement("div",{className:"post bg-white p my-1"},r.a.createElement("p",null,"Name: ",e.name,r.a.createElement("br",null),"Email: ",e.email,r.a.createElement("br",null),"Tel: ",e.tel,r.a.createElement("br",null),"Address: ",e.address),r.a.createElement("p",null,r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:function(){e.history.push("/client/"+e.id)}},"Edit"),r.a.createElement("button",{type:"button",className:"btn btn-dark",onClick:t},"Delete"))))},D=function(e){return 0===e.items.length?r.a.createElement("div",{className:"center"},r.a.createElement("h2",null,"No clients registered.")):r.a.createElement("ul",{style:{position:"relative"},className:"clients-list"},e.items.map((function(t){return r.a.createElement(I,{key:t._id,id:t._id,name:t.name,email:t.email,tel:t.tel,address:t.address,onDelete:e.onDelete,history:e.history})})))},T=function(e){var t=Object(a.useState)(),n=Object(s.a)(t,2),c=n[0],o=n[1],u=Object(a.useState)(),l=Object(s.a)(u,2),i=(l[0],l[1]),p=Object(a.useState)(!1),d=Object(s.a)(p,2),h=(d[0],d[1]);return Object(a.useEffect)((function(){(function(){var e=Object(f.a)(m.a.mark((function e(){var t,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,fetch("https://direct-to-you.herokuapp.com/api/client",{method:"GET",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 4:return t=e.sent,e.next=7,t.json();case 7:if(n=e.sent,t.ok){e.next=10;break}throw new Error(n.msg);case 10:o((function(){return n})),h(!1),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(1),h(!1),i(e.t0.message);case 18:case"end":return e.stop()}}),e,null,[[1,14]])})));return function(){return e.apply(this,arguments)}})()()}),[]),r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Clients"),r.a.createElement("button",{onClick:function(){e.history.push("/client/new")},className:"btn btn-green"},"New Client"),c&&r.a.createElement(D,{items:c,onDelete:function(e){o((function(t){return t.filter((function(t){return t._id!==e}))})),console.log(c)},history:e.history}))},P=function(e){var t=Object(l.g)().clientId,n=Object(a.useState)({name:"",email:"",tel:"",address:""}),c=Object(s.a)(n,2),o=c[0],u=c[1],i=Object(a.useState)(!1),b=Object(s.a)(i,2),E=(b[0],b[1]),g=Object(a.useState)([]),v=Object(s.a)(g,2),y=v[0],j=v[1],k=o.name,O=o.email,x=o.tel,N=o.address;Object(a.useEffect)((function(){(function(){var e=Object(f.a)(m.a.mark((function e(){var n,a;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("".concat("https://direct-to-you.herokuapp.com","/api/client/").concat(t),{headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")}});case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,u({name:a.name,email:a.email,tel:a.tel,address:a.address}),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}})()()}),[t,u]);var w=function(e){return u(Object(h.a)(Object(h.a)({},o),{},Object(d.a)({},e.target.name,e.target.value)))},S=function(){var n=Object(f.a)(m.a.mark((function n(a){var r,c,s,u;return m.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a.preventDefault(),j((function(e){return[]})),r=Object(h.a)({},o),n.prev=3,E(!0),n.next=7,fetch("https://direct-to-you.herokuapp.com/api/client/"+t,{method:"PUT",headers:{"Content-Type":"application/json","x-auth-token":localStorage.getItem("token")},body:JSON.stringify(r)});case 7:return c=n.sent,n.next=10,c.json();case 10:s=n.sent,console.log(s),c.ok?(E(!1),e.history.push("/clients")):(u=[],s.errors.forEach((function(e){u.push(e.msg)})),j((function(e){return e.concat(u)})),E(!1)),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(3),console.error(n.t0),E(!1),j((function(e){return[].concat(Object(p.a)(e),[n.t0.message||"Something went wrong, please try again"])}));case 20:case"end":return n.stop()}}),n,null,[[3,15]])})));return function(e){return n.apply(this,arguments)}}(),C=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Update Client"),r.a.createElement(C,{errors:y}),r.a.createElement("form",{className:"form",onSubmit:function(e){return S(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client Name",name:"name",value:k,onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client email",name:"email",value:O,onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client tel",name:"tel",value:x,onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Client address",name:"address",value:N,onChange:function(e){return w(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Update"}),r.a.createElement("button",{type:"submit",className:"btn btn-primary",onClick:function(){return e.history.push("/clients")}},"Cancel")))},_=Object(a.createContext)({isLoggedIn:!1,login:function(){},logout:function(){}}),L=function(e){var t=Object(a.useContext)(_);return r.a.createElement("nav",{className:"navbar bg-dark"},r.a.createElement("h1",null,r.a.createElement(u.b,{to:"/"},r.a.createElement("i",{className:"fas fa-code"})," Direct2U")),r.a.createElement("ul",null,!t.isLoggedIn&&r.a.createElement("li",null,r.a.createElement(u.b,{to:"/register"},"Register")),!t.isLoggedIn&&r.a.createElement("li",null,r.a.createElement(u.b,{to:"/login"},"Login")),t.isLoggedIn&&r.a.createElement("li",null,r.a.createElement(u.b,{to:"/clients"},"Clients")),t.isLoggedIn&&r.a.createElement("li",null,r.a.createElement(u.b,{to:"/products"},"Products")),t.isLoggedIn&&r.a.createElement("li",null,r.a.createElement(u.b,{to:"/sales"},"Sales")),t.isLoggedIn&&r.a.createElement("li",null,r.a.createElement("button",{onClick:t.logout},"LOGOUT"))))},A=function(){var e=Object(a.useContext)(_);return r.a.createElement("section",{className:"landing"},r.a.createElement("div",{className:"dark-overlay"},r.a.createElement("div",{className:"landing-inner"},r.a.createElement("h1",{className:"x-large"},"Direct2U"),r.a.createElement("p",{className:"lead"},"A Direct Sales Management Plattaform"),r.a.createElement("div",{className:"buttons"},!e.isLoggedIn&&r.a.createElement(u.b,{to:"/register",className:"btn btn-primary"},"Sign Up"),!e.isLoggedIn&&r.a.createElement(u.b,{to:"/login",className:"btn btn-light"},"Login")))))},U=function(){var e=Object(a.useContext)(_),t=Object(a.useState)({email:"",password:""}),n=Object(s.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(!1),i=Object(s.a)(l,2),b=(i[0],i[1]),E=Object(a.useState)([]),g=Object(s.a)(E,2),v=g[0],y=g[1],j=function(e,t){localStorage.setItem("token",t.token),e.login()},k=c.email,O=c.password,x=function(e){return o(Object(h.a)(Object(h.a)({},c),{},Object(d.a)({},e.target.name,e.target.value)))},N=function(){var t=Object(f.a)(m.a.mark((function t(n){var a,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),y((function(e){return[]})),a={email:k,password:O},t.prev=3,b(!0),t.next=7,fetch("https://direct-to-you.herokuapp.com/api/auth",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 7:return r=t.sent,t.next=10,r.json();case 10:c=t.sent,console.log(c),r.ok?(b(!1),j(e,c)):(localStorage.removeItem("token"),o=[],c.errors.forEach((function(e){o.push(e.msg)})),y((function(e){return e.concat(o)})),b(!1)),t.next=21;break;case 15:t.prev=15,t.t0=t.catch(3),localStorage.removeItem("token"),console.error(t.t0),b(!1),y((function(e){return[].concat(Object(p.a)(e),[t.t0.message||"Something went wrong, please try again"])}));case 21:case"end":return t.stop()}}),t,null,[[3,15]])})));return function(e){return t.apply(this,arguments)}}(),w=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Sign In"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Sign Into Your Account"),r.a.createElement(w,{errors:v}),r.a.createElement("form",{className:"form",onSubmit:function(e){return N(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:k,onChange:function(e){return x(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:O,onChange:function(e){return x(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Login"})),r.a.createElement("p",{className:"my-1"},"Don't have an account? ",r.a.createElement(u.b,{to:"/register"},"Sign Up")))},q=function(){var e=Object(a.useContext)(_),t=Object(a.useState)({name:"",email:"",password:"",password2:""}),n=Object(s.a)(t,2),c=n[0],o=n[1],l=Object(a.useState)(!1),i=Object(s.a)(l,2),b=(i[0],i[1]),E=Object(a.useState)([]),g=Object(s.a)(E,2),v=g[0],y=g[1],j=function(e,t){localStorage.setItem("token",t.token),e.login()},k=c.name,O=c.email,x=c.password,N=c.password2,w=function(e){return o(Object(h.a)(Object(h.a)({},c),{},Object(d.a)({},e.target.name,e.target.value)))},S=function(){var t=Object(f.a)(m.a.mark((function t(n){var a,r,c,o;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),y((function(e){return[]})),x===N){t.next=7;break}y((function(e){return[].concat(Object(p.a)(e),["Passwords do not match"])})),console.log("Passwords do not match"),t.next=25;break;case 7:return a={name:k,email:O,password:x},t.prev=8,b(!0),t.next=12,fetch("https://direct-to-you.herokuapp.com/api/user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});case 12:return r=t.sent,t.next=15,r.json();case 15:c=t.sent,r.ok?(b(!1),j(e,c)):(localStorage.removeItem("token"),o=[],c.errors.forEach((function(e){o.push(e.msg)})),y((function(e){return e.concat(o)})),b(!1)),t.next=25;break;case 19:t.prev=19,t.t0=t.catch(8),localStorage.removeItem("token"),console.error(t.t0),b(!1),y((function(e){return[].concat(Object(p.a)(e),[t.t0.message||"Something went wrong, please try again"])}));case 25:case"end":return t.stop()}}),t,null,[[8,19]])})));return function(e){return t.apply(this,arguments)}}(),C=function(e){return e.errors.map((function(e,t){return r.a.createElement("p",{key:t,style:{color:"red"}},e)}))};return r.a.createElement("section",{className:"container"},r.a.createElement("h1",{className:"large text-primary"},"Sign Up"),r.a.createElement("p",{className:"lead"},r.a.createElement("i",{className:"fas fa-user"})," Create Your Account"),r.a.createElement(C,{errors:v}),r.a.createElement("form",{className:"form",onSubmit:function(e){return S(e)}},r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"text",placeholder:"Name",name:"name",value:k,onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"email",placeholder:"Email Address",name:"email",value:O,onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Password",name:"password",value:x,onChange:function(e){return w(e)}})),r.a.createElement("div",{className:"form-group"},r.a.createElement("input",{type:"password",placeholder:"Confirm Password",name:"password2",minLength:"6",value:N,onChange:function(e){return w(e)}})),r.a.createElement("input",{type:"submit",className:"btn btn-primary",value:"Register"})),r.a.createElement("p",{className:"my-1"},"Already have an account? ",r.a.createElement(u.b,{to:"/login"},"Sign In")))},J=(n(35),function(){var e=Object(a.useState)(!1),t=Object(s.a)(e,2),n=t[0],c=t[1],o=Object(a.useCallback)((function(){c(!0)}),[]),i=Object(a.useCallback)((function(){c(!1)}),[]);return r.a.createElement(_.Provider,{value:{isLoggedIn:n,login:o,logout:i}},r.a.createElement(u.a,null,r.a.createElement(L,null),n?r.a.createElement(l.d,null,r.a.createElement(l.b,{path:"/product/new",exact:!0,component:b}),r.a.createElement(l.b,{path:"/products",exact:!0,component:v}),r.a.createElement(l.b,{path:"/product/:productId",exact:!0,component:y}),r.a.createElement(l.b,{path:"/sale/new",exact:!0,component:O}),r.a.createElement(l.b,{path:"/sales",exact:!0,component:w}),r.a.createElement(l.b,{path:"/sale/:saleId",exact:!0,component:S}),r.a.createElement(l.b,{path:"/client/new",exact:!0,component:C}),r.a.createElement(l.b,{path:"/clients",exact:!0,component:T}),r.a.createElement(l.b,{path:"/client/:clientId",exact:!0,component:P}),r.a.createElement(l.b,{path:"/",exact:!0,component:A}),r.a.createElement(l.a,{to:"/"})):r.a.createElement(l.d,null,r.a.createElement(l.b,{exact:!0,path:"/register",component:q}),r.a.createElement(l.b,{exact:!0,path:"/login",component:U}),r.a.createElement(l.b,{path:"/",exact:!0,component:A}),r.a.createElement(l.a,{to:"/"}))))});o.a.render(r.a.createElement(J,null),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.4fecfe1c.chunk.js.map